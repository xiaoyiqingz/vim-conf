# put this line to .bashrc
# if [ -f ~/.mybashrc ]; then . ~/.mybashrc; fi

# for git
function find_git_branch {
     local dir=. head
     until [ "$dir" -ef / ]; do
         if [ -f "$dir/.git/HEAD" ]; then
             head=$(< "$dir/.git/HEAD")
             if [[ $head == ref:\ refs/heads/* ]]; then
                 git_branch=" (${head#*/*/})"
             elif [[ $head != '' ]]; then
                 git_branch=' (detached)'
             else
                 git_branch=' (unknown)'
             fi
             return
         fi
         dir="../$dir"
     done
     git_branch=''
}
PROMPT_COMMAND="find_git_branch; $PROMPT_COMMAND"

red=$'\e[1;31m'
green=$'\e[1;32m'
blue=$'\e[1;34m'
normal_colours=$'\e[m'

PS1="\[$blue\][\[$red\]\u:\w\[$green\]\$git_branch\[$blue\]]\[$normal_colours\]\\$ "

if [ "$TERM" == "xterm" ]; then
    export TERM=xterm-256color
fi
